<html><head>
    <title>Apakau</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' href='lib/leaflet.css' />
<style type='text/css'>
    html,body {height: 100%;  margin: 0px; padding: 0px; }
    #mapC { width: 97%; height: 70%; }
</style>
</head><body>

<div id='mapC' ></div>
<div style="display: inline; width: 100%;"><div style="float:left; margin-left: 10px">
    <canvas id='cacheGaug' width='150px' height='150px' />
</div>
<div>
    <canvas style="margin-left: 10px; margin-top: 30px" id='chartLate' width='500px' height='75px'/>
</div></div>

<script src='lib/leaflet.js'></script>
<script src='lib/gauge.min.js'></script>
<script src='lib/smoothie.js'></script>
<script>
var map = L.map('mapC', {
    attributionControl: false
    })
map.setView([37.9, -122.3], 6)     // 37.9, -122.3], 6

L.tileLayer('http://{s}.tile.cloudmade.com/23176814c27c42efa342d083709c8f8c/22677/256/{z}/{x}/{y}.png', {
    maxZoom: 14
    ,minZoom:5
    }).addTo(map)

var goptions = {
    value: 34,
    label: 'Node Cache',
    unitsLabel: ' %',
    min: 0,
    max: 95,
    majorTicks: 10,
    minorTicks: 2,
    greenFrom: 15,
    greenTo: 94,
    yellowFrom: 0,
    yellowTo: 6
}
var gg=new Gauge( document.getElementById( 'cacheGaug' ), goptions )


// Randomly add a data point every 500ms
var data = new TimeSeries()
setInterval(function() {
    data.append(new Date().getTime(), Math.random() * 600+25)
}, 40)

var chart
console.log('loaded')
chart = new SmoothieChart()
chart.addTimeSeries(data, { strokeStyle: 'rgba(0, 255, 0, 1)', fillStyle: 'rgba(0, 255, 0, 0.2)', lineWidth: 4 })
chart.streamTo(document.getElementById('chartLate'), 1000)

var pop1 = L.circle([40.78, -73.95], 250, {
    color: 'blue',
    fillColor: '#f03',
    fillOpacity: 0.3
}).addTo(map);
var pop2 = L.circle([40.707, -74.01], 250, {
    color: 'blue',
    fillColor: '#100',
    fillOpacity: 0.3
}).addTo(map);

</script>
</body></html>


